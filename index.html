<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Raccoon Clicker</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #1a1a1a;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            font-family: Arial, sans-serif;
            box-sizing: border-box;
        }

        #game-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            height: 100vh;
            max-height: 900px;
            background-color: #2c2c2c;
            border: 2px solid #444;
            overflow: hidden;
        }

        #inner-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: 1180px;
            max-height: 880px;
            margin: auto;
            background: rgb(0, 0, 255);
            animation: rgbCycle 60s linear infinite;
        }

        @keyframes rgbCycle {
            0% { background-color: rgb(0, 0, 255); }
            16.67% { background-color: rgb(0, 255, 255); }
            33.33% { background-color: rgb(0, 255, 0); }
            50% { background-color: rgb(255, 255, 0); }
            66.67% { background-color: rgb(255, 0, 0); }
            83.33% { background-color: rgb(255, 0, 255); }
            100% { background-color: rgb(0, 0, 255); }
        }

        #inner-container.rebirth {
            animation: fadeToWhite 0.5s forwards, fadeBack 0.5s 0.5s forwards;
        }

        #inner-container.endgame {
            animation: fadeToBlack 1s forwards;
        }

        @keyframes fadeToWhite {
            0% { background: inherit; }
            100% { background-color: white; }
        }

        @keyframes fadeBack {
            0% { background-color: white; }
            100% { background: rgb(0, 0, 255); animation: rgbCycle 60s linear infinite; }
        }

        @keyframes fadeToBlack {
            0% { background: inherit; }
            100% { background-color: black; }
        }

        @keyframes shakeEffect {
            0% { transform: translate(calc(-50% - 10px), -50%) translateX(0); }
            10% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
            20% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
            30% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
            40% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
            50% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
            60% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
            70% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
            80% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
            90% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
            100% { transform: translate(calc(-50% - 10px), -50%) translateX(0); }
        }

        #raccoon {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(calc(-50% - 10px), -50%);
            width: 50px;
            height: 50px;
            font-size: 50px;
            line-height: 50px;
            text-align: center;
            cursor: pointer;
            user-select: none;
            z-index: 10;
        }

        #raccoon.clicked {
            animation: zoomEffect 0.2s ease-in-out;
        }

        #raccoon.green {
            filter: hue-rotate(120deg);
        }

        #raccoon.red {
            filter: hue-rotate(-30deg);
        }

        #raccoon.green.red {
            filter: hue-rotate(120deg) hue-rotate(-30deg);
        }

        #raccoon.shake {
            animation: shakeEffect 0.5s ease-in-out;
        }

        @keyframes zoomEffect {
            0% { transform: translate(calc(-50% - 10px), -50%) scale(1); }
            50% { transform: translate(calc(-50% - 10px), -50%) scale(0.8); }
            100% { transform: translate(calc(-50% - 10px), -50%) scale(1); }
        }

        #score {
            position: absolute;
            top: 2%;
            right: 2%;
            color: #000000;
            font-size: 13px;
            display: flex;
            align-items: center;
            z-index: 10;
        }

        #version {
            position: absolute;
            top: 2%;
            left: 2%;
            color: #000000;
            font-size: 13px;
            z-index: 10;
        }

        #click-counter {
            position: absolute;
            top: 6%;
            right: 2%;
            color: #000000;
            font-size: 13px;
            z-index: 10;
        }

        #playtime {
            position: absolute;
            top: 15%;
            left: 50%;
            transform: translate(-50%, 0);
            color: #000000;
            font-size: 30px;
            z-index: 10;
        }

        #shop-container {
            position: absolute;
            bottom: 2%;
            left: 2%;
            display: flex;
            flex-direction: column;
            gap: 0.5vh;
            z-index: 10;
            width: 40%;
            max-width: 200px;
        }

        #shop-items,
        #info-content {
            display: none;
            flex-direction: column;
            gap: 0.5vh;
        }

        .shop-item,
        .info-button,
        #toggle-particles {
            background-color: #444;
            color: white;
            padding: 0.5vh;
            border: none;
            cursor: pointer;
            font-size: 13px;
            min-height: 44px;
            width: 100%;
            box-sizing: border-box;
            text-align: left;
        }

        .shop-item:hover,
        .info-button:hover,
        #toggle-particles:hover {
            background-color: #555;
        }

        .shop-item:disabled,
        #toggle-particles:disabled {
            background-color: #666;
            cursor: not-allowed;
        }

        #info-content {
            background-color: #444;
            padding: 1%;
            color: white;
            font-size: 13px;
            max-width: 100%;
        }

        #secret-code-container {
            display: flex;
            align-items: center;
            gap: 0.5vw;
        }

        #secret-code-input {
            background-color: #555;
            color: white;
            border: 1px solid #666;
            padding: 0.5vh;
            font-size: 13px;
            width: 60%;
            min-height: 44px;
            box-sizing: border-box;
        }

        #enter-code {
            background-color: #444;
            color: white;
            padding: 0.5vh;
            border: none;
            cursor: pointer;
            font-size: 13px;
            min-height: 44px;
            width: 40%;
            box-sizing: border-box;
        }

        #enter-code:hover {
            background-color: #555;
        }

        #rebirth-bar-container {
            position: absolute;
            bottom: 2%;
            right: 2%;
            width: 150px;
            height: 3vh;
            background-color: #666;
            border: 1px solid #444;
            z-index: 10;
        }

        #rebirth-bar {
            width: 0%;
            height: 100%;
            background-color: #ffd700;
            transition: width 0.3s ease;
        }

        #rebirth-label {
            position: absolute;
            bottom: 6%;
            right: 2%;
            color: #000000;
            font-size: 13px;
            z-index: 10;
        }

        #rebirth-counter {
            position: absolute;
            bottom: 12%;
            left: 50%;
            transform: translateX(-50%);
            color: #000000;
            font-size: 13px;
            z-index: 10;
            display: none;
        }

        #rebirth-progress-container {
            position: absolute;
            bottom: 8%;
            left: 50%;
            transform: translateX(-50%);
            width: 20vw;
            max-width: 150px;
            height: 1.5vh;
            background-color: #666;
            border: 1px solid #444;
            z-index: 10;
            display: none;
        }

        #rebirth-progress-bar {
            width: 0%;
            height: 100%;
            background-color: #ffd700;
            transition: width 0.3s ease;
        }

        .particle {
            position: absolute;
            width: 13px;
            height: 13px;
            font-size: 13px;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: -1;
            filter: blur(0.1px);
        }

        @keyframes particleMove {
            0% { opacity: 1; }
            100% { opacity: 0; }
        }

        .timer-circle {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 25vw;
            max-width: 200px;
            height: 25vw;
            max-height: 200px;
            z-index: 5;
        }

        .orbiter-cyber {
            filter: brightness(0.7);
        }

        .orbiter-hot {
            filter: hue-rotate(-30deg);
        }

        #endgame-message {
            position: absolute;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #000000;
            font-size: 13px;
            text-align: center;
            z-index: 15;
            display: none;
            max-width: 80%;
        }

        #endgame-message.white {
            color: #ffffff;
        }

        .connection-line {
            z-index: 3;
        }

        @media (max-width: 600px) {
            #raccoon {
                width: 8vw;
                height: 8vw;
                font-size: 8vw;
                line-height: 8vw;
            }

            @keyframes zoomEffect {
                0% { transform: translate(calc(-50% - 10px), -50%) scale(1); }
                50% { transform: translate(calc(-50% - 10px), -50%) scale(0.8); }
                100% { transform: translate(calc(-50% - 10px), -50%) scale(1); }
            }

            @keyframes shakeEffect {
                0% { transform: translate(calc(-50% - 10px), -50%) translateX(0); }
                10% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
                20% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
                30% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
                40% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
                50% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
                60% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
                70% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
                80% { transform: translate(calc(-50% - 10px), -50%) translateX(5px); }
                90% { transform: translate(calc(-50% - 10px), -50%) translateX(-5px); }
                100% { transform: translate(calc(-50% - 10px), -50%) translateX(0); }
            }

            #score {
                font-size: 2vw;
                color: #000000;
            }

            #version {
                font-size: 2vw;
                color: #000000;
            }

            #click-counter {
                font-size: 2vw;
                color: #000000;
            }

            #playtime {
                font-size: 5vw;
                color: #000000;
            }

            .shop-item,
            .info-button,
            #toggle-particles,
            #enter-code {
                font-size: 2vw;
                min-height: 44px;
            }

            #info-content {
                font-size: 2vw;
            }

            #secret-code-input {
                font-size: 2vw;
            }

            #rebirth-label {
                font-size: 2vw;
                color: #000000;
            }

            #rebirth-counter {
                font-size: 2vw;
                color: #000000;
            }

            #rebirth-bar-container {
                width: 25vw;
            }

            .particle {
                width: 2vw;
                height: 2vw;
                font-size: 2vw;
            }

            #endgame-message {
                font-size: 2vw;
                color: #000000;
            }

            #endgame-message.white {
                color: #ffffff;
            }
        }
    </style>
</head>

<body>
    <div id="game-container">
        <div id="inner-container">
            <div id="raccoon">ü¶ù</div>
            <div id="version">Version 0.0.1</div>
            <div id="score">0.00 üí∞</div>
            <div id="click-counter">Clicks: 0</div>
            <div id="playtime">00:00:00</div>
            <div id="shop-container">
                <button class="shop-item" id="toggle-shop">Open Shop</button>
                <div id="shop-items">
                    <button class="shop-item" id="buy-autoclicker"
                        title="Adds an automatic click every 1.5s and an orbiting raccoon (cost increases 1.5x per purchase)">ü§ñ
                        Auto Clicker: 5 Racoins (0)</button>
                    <button class="shop-item" id="buy-glasses"
                        title="Makes Auto Clicker, Hot Click, and Cyber Click 2x faster (cost doubles per purchase)">üï∂Ô∏è
                        Glasses: 10 Racoins (0)</button>
                    <button class="shop-item" id="buy-trashcan"
                        title="Makes clicks worth 2x more (cost doubles per purchase, max 20, not purchasable at rebirth 11+)">üóëÔ∏è
                        Trashcan: 50 Racoins (0/20)</button>
                    <button class="shop-item" id="buy-hotclick" style="display: none;"
                        title="Clicks 4x faster than Auto Clicker, turns raccoon red, emits fire particles, and adds an orange orbiting raccoon (cost doubles per rebirth and per purchase). Unlocked at rebirth 2">üî•
                        Hot Click: 200 Racoins (0)</button>
                    <button class="shop-item" id="buy-pizza" style="display: none;"
                        title="Increases click speed by 5x for 5s (cost doubles per rebirth, triples per purchase). Unlocked at rebirth 3">üçï
                        Pizza: 300 Racoins</button>
                    <button class="shop-item" id="buy-cyberclick" style="display: none;"
                        title="Performs 5 clicks per activation and adds a gray orbiting raccoon (cost doubles per rebirth and per purchase). Unlocked at rebirth 5">üíæ
                        Cyber Click: 700 Racoins (0)</button>
                    <button class="shop-item" id="buy-coffee" style="display: none;"
                        title="Mmm... coffee. 10x click speed for 2s (cost doubles per rebirth, 10x per purchase). Unlocked at rebirth 8">‚òï
                        Coffee: 1500 Racoins</button>
                    <button class="shop-item" id="buy-uranium" style="display: none;"
                        title="Turns the raccoon green and makes each click worth 1000 for 5s (cost doubles per rebirth, 10x per purchase). Unlocked at rebirth 8">‚ò¢Ô∏è
                        Uranium 235: 10000 Racoins</button>
                    <button class="shop-item" id="buy-mitosis" style="display: none;"
                        title="Removes all Auto Clickers and Hot Clicks, starts with one orbiting raccoon that doubles every 10s (cost 5x per rebirth, one-time purchase). Unlocked at rebirth 18">üß¨
                        Mitosis: 90000 Racoins</button>
                    <button class="shop-item" id="buy-neuralnetwork" style="display: none;"
                        title="Applies a 10x buff per purchase to all orbiting raccoon clicks, enables synapse lines between orbiting raccoons (cost doubles per rebirth and per purchase). Unlocked at rebirth 15">üß†
                        Neural Network: 100000000 Racoins (0)</button>
                </div>
                <button id="toggle-particles">‚ú® Particle: Normal</button>
                <button class="info-button" id="toggle-info">Info</button>
                <div id="info-content">
                    <p>This is a game of great dedication. Note that exiting the browser will reset your progress. Be careful and reach the end! :P<br><br>Hover over shop items to see their descriptions.</p>
                    <p>Secret Codes</p>
                    <div id="secret-code-container">
                        <input type="text" id="secret-code-input" placeholder="Enter code">
                        <button id="enter-code">Enter</button>
                    </div>
                </div>
            </div>
            <div id="rebirth-label">Rebirth Progress: 0/1000</div>
            <div id="rebirth-bar-container">
                <div id="rebirth-bar"></div>
            </div>
            <div id="rebirth-counter">Rebirths: 0/20</div>
            <div id="rebirth-progress-container">
                <div id="rebirth-progress-bar"></div>
            </div>
            <div id="endgame-message">Your clicks are so powerful that the fabric of space-time has ruptured. Now, you have only one choice...</div>
        </div>
    </div>

    <script>
        // DOM element references
        const raccoon = document.getElementById('raccoon');
        const scoreElement = document.getElementById('score');
        const clickCounterElement = document.getElementById('click-counter');
        const playtimeElement = document.getElementById('playtime');
        const gameContainer = document.getElementById('game-container');
        const innerContainer = document.getElementById('inner-container');
        const toggleShop = document.getElementById('toggle-shop');
        const shopItems = document.getElementById('shop-items');
        const toggleInfo = document.getElementById('toggle-info');
        const toggleParticles = document.getElementById('toggle-particles');
        const infoContent = document.getElementById('info-content');
        const secretCodeInput = document.getElementById('secret-code-input');
        const enterCodeButton = document.getElementById('enter-code');
        const buyAutoclicker = document.getElementById('buy-autoclicker');
        const buyGlasses = document.getElementById('buy-glasses');
        const buyTrashcan = document.getElementById('buy-trashcan');
        const buyHotClick = document.getElementById('buy-hotclick');
        const buyCyberClick = document.getElementById('buy-cyberclick');
        const buyPizza = document.getElementById('buy-pizza');
        const buyCoffee = document.getElementById('buy-coffee');
        const buyUranium = document.getElementById('buy-uranium');
        const buyMitosis = document.getElementById('buy-mitosis');
        const buyNeuralNetwork = document.getElementById('buy-neuralnetwork');
        const rebirthBar = document.getElementById('rebirth-bar');
        const rebirthLabel = document.getElementById('rebirth-label');
        const rebirthCounter = document.getElementById('rebirth-counter');
        const rebirthProgressBar = document.getElementById('rebirth-progress-bar');
        const endgameMessage = document.getElementById('endgame-message');
        const shopContainer = document.getElementById('shop-container');
        const rebirthBarContainer = document.getElementById('rebirth-bar-container');
        const rebirthProgressContainer = document.getElementById('rebirth-progress-container');

        // Game state variables
        let score = 0;
        let clickValue = 1;
        let overrideClickValue = false;
        let autoclickers = 0;
        let autoclickerCost = 5;
        let glasses = 0;
        let glassesCost = 10;
        let trashcans = 0;
        let trashcanCost = 50;
        let hotClicks = 0;
        let hotClickCost = 200;
        let cyberClicks = 0;
        let cyberClickCost = 700;
        let pizzaCost = 300;
        let coffeeCost = 1500;
        let uraniumCost = 10000;
        let mitosisBought = false;
        let mitosisCost = 90000;
        let neuralNetworks = 0;
        let neuralNetworkCost = 100000000;
        let mitoticAutoClickers = 0;
        let autoclickInterval = 1500;
        let hotClickInterval = 1500 / 4;
        let cyberClickInterval = 1500;
        let autoClickIntervalId = null;
        let hotClickIntervalId = null;
        let cyberClickIntervalId = null;
        let mitosisIntervalId = null;
        let pizzaTimeout = null;
        let coffeeTimeout = null;
        let uraniumTimeout = null;
        let totalClicks = 0;
        let rebirthClicks = 0;
        let rebirthThreshold = 1000;
        let rebirthCount = 0;
        let rebirthMultiplier = 1;
        let orbitingRaccoons = [];
        let connections = [];
        let isHotClickUnlocked = false;
        let isCyberClickUnlocked = false;
        let isPizzaUnlocked = false;
        let isCoffeeUnlocked = false;
        let isUraniumUnlocked = false;
        let isMitosisUnlocked = false;
        let isNeuralNetworkUnlocked = false;
        let particleLevelIndex = 3;
        let particleMultiplier = 1;
        const particleLevels = [
            { name: 'None', multiplier: 0 },
            { name: 'Very Low', multiplier: 0.125 },
            { name: 'Low', multiplier: 0.25 },
            { name: 'Normal', multiplier: 1 },
            { name: 'High', multiplier: 2 },
            { name: 'Very High', multiplier: 5 },
            { name: 'Supernova', multiplier: 10 }
        ];
        const startTime = Date.now();
        const centerX = window.innerWidth <= 600 ? window.innerWidth / 2 : 600;
        const centerY = window.innerHeight <= 600 ? window.innerHeight / 2 : 450;

        // Timer circle for Pizza
        const pizzaTimer = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        pizzaTimer.id = 'pizza-timer';
        pizzaTimer.setAttribute('viewBox', '0 0 100 100');
        pizzaTimer.classList.add('timer-circle');
        pizzaTimer.style.display = 'none';
        const pizzaCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        pizzaCircle.setAttribute('cx', '50');
        pizzaCircle.setAttribute('cy', '50');
        pizzaCircle.setAttribute('r', '45');
        pizzaCircle.setAttribute('stroke', '#ff8800');
        pizzaCircle.setAttribute('stroke-width', '10');
        pizzaCircle.setAttribute('fill', 'none');
        pizzaCircle.setAttribute('stroke-dasharray', '283');
        pizzaCircle.setAttribute('stroke-dashoffset', '0');
        pizzaTimer.appendChild(pizzaCircle);
        innerContainer.appendChild(pizzaTimer);

        // Timer circle for Coffee
        const coffeeTimer = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        coffeeTimer.id = 'coffee-timer';
        coffeeTimer.setAttribute('viewBox', '0 0 100 100');
        coffeeTimer.classList.add('timer-circle');
        coffeeTimer.style.display = 'none';
        const coffeeCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        coffeeCircle.setAttribute('cx', '50');
        coffeeCircle.setAttribute('cy', '50');
        coffeeCircle.setAttribute('r', '45');
        coffeeCircle.setAttribute('stroke', '#A52A2A');
        coffeeCircle.setAttribute('stroke-width', '10');
        coffeeCircle.setAttribute('fill', 'none');
        coffeeCircle.setAttribute('stroke-dasharray', '283');
        coffeeCircle.setAttribute('stroke-dashoffset', '0');
        coffeeTimer.appendChild(coffeeCircle);
        innerContainer.appendChild(coffeeTimer);

        // Timer circle for Uranium
        const uraniumTimer = document.createElementNS("http://www.w3.org/2000/svg", "svg");
        uraniumTimer.id = 'uranium-timer';
        uraniumTimer.setAttribute('viewBox', '0 0 100 100');
        uraniumTimer.classList.add('timer-circle');
        uraniumTimer.style.display = 'none';
        const uraniumCircle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        uraniumCircle.setAttribute('cx', '50');
        uraniumCircle.setAttribute('cy', '50');
        uraniumCircle.setAttribute('r', '45');
        uraniumCircle.setAttribute('stroke', '#00ff00');
        uraniumCircle.setAttribute('stroke-width', '10');
        uraniumCircle.setAttribute('fill', 'none');
        uraniumCircle.setAttribute('stroke-dasharray', '283');
        uraniumCircle.setAttribute('stroke-dashoffset', '0');
        uraniumTimer.appendChild(uraniumCircle);
        innerContainer.appendChild(uraniumTimer);

        // Toggle particle effects
        toggleParticles.addEventListener('click', () => {
            particleLevelIndex = (particleLevelIndex + 1) % particleLevels.length;
            toggleParticles.textContent = `‚ú® Particle: ${particleLevels[particleLevelIndex].name}`;
        });

        // Toggle shop visibility
        toggleShop.addEventListener('click', () => {
            if (shopItems.style.display === 'none' || shopItems.style.display === '') {
                shopItems.style.display = 'flex';
                toggleShop.textContent = 'Close Shop';
                infoContent.style.display = 'none';
                toggleInfo.textContent = 'Info';
            } else {
                shopItems.style.display = 'none';
                toggleShop.textContent = 'Open Shop';
            }
        });

        // Toggle info panel visibility
        toggleInfo.addEventListener('click', () => {
            if (infoContent.style.display === 'none' || infoContent.style.display === '') {
                infoContent.style.display = 'block';
                toggleInfo.textContent = 'Close Info';
                shopItems.style.display = 'none';
                toggleShop.textContent = 'Open Shop';
            } else {
                infoContent.style.display = 'none';
                toggleInfo.textContent = 'Info';
            }
        });

        // Handle secret code input
        enterCodeButton.addEventListener('click', () => {
            const code = secretCodeInput.value;
            if (code === 'R0') jumpToRebirth(0);
            else if (code === 'R1') jumpToRebirth(1);
            else if (code === 'R2') jumpToRebirth(2);
            else if (code === 'R3') jumpToRebirth(3);
            else if (code === 'R4') jumpToRebirth(4);
            else if (code === 'R5') jumpToRebirth(5);
            else if (code === 'R6') jumpToRebirth(6);
            else if (code === 'R7') jumpToRebirth(7);
            else if (code === 'R8') jumpToRebirth(8);
            else if (code === 'R9') jumpToRebirth(9);
            else if (code === 'R10') jumpToRebirth(10);
            else if (code === 'R11') jumpToRebirth(11);
            else if (code === 'R12') jumpToRebirth(12);
            else if (code === 'R13') jumpToRebirth(13);
            else if (code === 'R14') jumpToRebirth(14);
            else if (code === 'R15') jumpToRebirth(15);
            else if (code === 'R16') jumpToRebirth(16);
            else if (code === 'R17') jumpToRebirth(17);
            else if (code === 'R18') jumpToRebirth(18);
            else if (code === 'R19') jumpToRebirth(19);
            else if (code === 'R20') jumpToRebirth(20);
            else if (code === 'I_want_more!') {
                overrideClickValue = true;
                clickValue = 5;
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
            } else if (code === 'OH_MY_PC!') {
                particleMultiplier = 5;
            } else if (code === 'infcoin') {
                score = Infinity;
            }
            secretCodeInput.value = '';
            updateScore();
        });

        // Format numbers with suffixes (k, M, B, T, Q)
        function formatNumber(num, isScore = false) {
            if (!isFinite(num)) return 'Infinity';
            const absNum = Math.abs(num);
            if (absNum < 1000) return isScore ? num.toFixed(2) : num.toFixed(0);
            const suffixes = ['k', 'M', 'B', 'T', 'Q'];
            const maxTier = suffixes.length;
            const tier = Math.min(maxTier, Math.floor(Math.log10(absNum) / 3));
            if (tier === 0) return isScore ? num.toFixed(2) : num.toFixed(0);
            if (tier < maxTier) {
                const scaled = num / Math.pow(10, tier * 3);
                return scaled.toFixed(1).replace(/\.0$/, '') + suffixes[tier - 1];
            }
            const scaled = num / Math.pow(10, (maxTier) * 3);
            return scaled.toFixed(2).replace(/\.00$/, '') + suffixes[maxTier - 1];
        }

        // Jump to a specific rebirth level
        function jumpToRebirth(n) {
            if (n === rebirthCount) return;
            raccoon.style.pointerEvents = 'none';
            if (autoClickIntervalId) clearInterval(autoClickIntervalId);
            if (hotClickIntervalId) clearInterval(hotClickIntervalId);
            if (cyberClickIntervalId) clearInterval(cyberClickIntervalId);
            if (mitosisIntervalId) clearInterval(mitosisIntervalId);
            autoClickIntervalId = null;
            hotClickIntervalId = null;
            cyberClickIntervalId = null;
            mitosisIntervalId = null;
            if (pizzaTimeout) clearTimeout(pizzaTimeout);
            if (coffeeTimeout) clearTimeout(coffeeTimeout);
            if (uraniumTimeout) clearTimeout(uraniumTimeout);
            pizzaTimeout = null;
            coffeeTimeout = null;
            uraniumTimeout = null;
            pizzaTimer.style.display = 'none';
            coffeeTimer.style.display = 'none';
            uraniumTimer.style.display = 'none';
            orbitingRaccoons.forEach(o => o.element.remove());
            orbitingRaccoons = [];
            connections.forEach(c => c.element.remove());
            connections = [];
            buyAutoclicker.disabled = true;
            buyGlasses.disabled = true;
            buyTrashcan.disabled = true;
            buyHotClick.disabled = true;
            buyCyberClick.disabled = true;
            buyPizza.disabled = true;
            buyCoffee.disabled = true;
            buyUranium.disabled = true;
            buyMitosis.disabled = true;
            buyNeuralNetwork.disabled = true;
            toggleShop.disabled = true;
            toggleInfo.disabled = true;
            toggleParticles.disabled = true;
            innerContainer.classList.remove('endgame');
            endgameMessage.style.display = 'none';
            endgameMessage.classList.remove('white');
            scoreElement.style.display = 'flex';
            clickCounterElement.style.display = 'block';
            playtimeElement.style.display = 'block';
            shopContainer.style.display = 'flex';
            rebirthLabel.style.display = 'block';
            rebirthBarContainer.style.display = 'block';
            if (rebirthCount >= 1) {
                rebirthCounter.style.display = 'block';
                rebirthProgressContainer.style.display = 'block';
            }
            innerContainer.classList.add('rebirth');
            setTimeout(() => {
                innerContainer.classList.remove('rebirth');
                rebirthCount = n;
                rebirthMultiplier = Math.max(0.1, 1 - (rebirthCount + 1) * 0.05);
                rebirthThreshold = 1000 * Math.pow(2, rebirthCount);
                rebirthClicks = 0;
                score = 0;
                clickValue = overrideClickValue ? 5 : 1;
                autoclickers = 0;
                autoclickerCost = 5;
                glasses = 0;
                glassesCost = 10;
                trashcans = 0;
                trashcanCost = 50;
                hotClicks = 0;
                hotClickCost = 200 * Math.pow(2, rebirthCount);
                cyberClicks = 0;
                cyberClickCost = 700 * Math.pow(2, rebirthCount);
                pizzaCost = 300 * Math.pow(2, rebirthCount);
                coffeeCost = 1500 * Math.pow(2, rebirthCount);
                uraniumCost = 10000 * Math.pow(2, rebirthCount);
                neuralNetworks = 0;
                neuralNetworkCost = 100000000 * Math.pow(2, rebirthCount);
                mitosisBought = false;
                mitoticAutoClickers = 0;
                mitosisCost = 90000 * Math.pow(5, rebirthCount);
                autoclickInterval = 1500;
                hotClickInterval = 1500 / 4;
                cyberClickInterval = 1500;
                isHotClickUnlocked = rebirthCount >= 2;
                isPizzaUnlocked = rebirthCount >= 3;
                isCyberClickUnlocked = rebirthCount >= 5;
                isCoffeeUnlocked = rebirthCount >= 8;
                isUraniumUnlocked = rebirthCount >= 8;
                isNeuralNetworkUnlocked = rebirthCount >= 15;
                isMitosisUnlocked = rebirthCount >= 18;
                buyHotClick.style.display = isHotClickUnlocked ? 'block' : 'none';
                buyCyberClick.style.display = isCyberClickUnlocked ? 'block' : 'none';
                buyPizza.style.display = isPizzaUnlocked ? 'block' : 'none';
                buyCoffee.style.display = isCoffeeUnlocked ? 'block' : 'none';
                buyUranium.style.display = isUraniumUnlocked ? 'block' : 'none';
                buyMitosis.style.display = isMitosisUnlocked && !mitosisBought ? 'block' : 'none';
                buyNeuralNetwork.style.display = isNeuralNetworkUnlocked ? 'block' : 'none';
                if (rebirthCount >= 1) {
                    rebirthCounter.style.display = 'block';
                    rebirthProgressContainer.style.display = 'block';
                }
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
                setupMitosis();
                updateScore();
                updateRaccoonAppearance();
                raccoon.style.pointerEvents = 'auto';
                toggleShop.disabled = false;
                toggleInfo.disabled = false;
                toggleParticles.disabled = false;
            }, 1000);
        }

        // Update playtime display
        setInterval(() => {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const hours = Math.floor(elapsed / 3600).toString().padStart(2, '0');
            const mins = Math.floor((elapsed % 3600) / 60).toString().padStart(2, '0');
            const secs = (elapsed % 60).toString().padStart(2, '0');
            playtimeElement.textContent = `${hours}:${mins}:${secs}`;
        }, 1000);

        // Animate orbiting raccoons and neural network connections
        function animateOrbiters() {
            orbitingRaccoons.forEach((o, index) => {
                o.angle += o.speed / 60;
                if (o.angle > 360) o.angle -= 360;
                const rad = o.angle * Math.PI / 180;
                const x = centerX + o.radius * Math.cos(rad) - 6.5;
                const y = centerY + o.radius * Math.sin(rad) - 6.5;
                o.element.style.left = `${x}px`;
                o.element.style.top = `${y}px`;
            });

            // Create infinite neural network connections when neuralNetworks > 0
            if (neuralNetworks > 0 && orbitingRaccoons.length >= 2) {
                const maxConnections = Math.floor(orbitingRaccoons.length / 2);
                const currentConnections = connections.length;
                if (currentConnections < maxConnections) {
                    const availableOrbiters = orbitingRaccoons.map((_, i) => i);
                    const usedPairs = new Set(connections.map(c => `${Math.min(c.orbiter1, c.orbiter2)}-${Math.max(c.orbiter1, c.orbiter2)}`));
                    let newConnections = 0;
                    while (newConnections < maxConnections - currentConnections && availableOrbiters.length >= 2) {
                        const idx1 = availableOrbiters[Math.floor(Math.random() * availableOrbiters.length)];
                        availableOrbiters.splice(availableOrbiters.indexOf(idx1), 1);
                        const idx2 = availableOrbiters[Math.floor(Math.random() * availableOrbiters.length)];
                        availableOrbiters.splice(availableOrbiters.indexOf(idx2), 1);
                        const pairKey = `${Math.min(idx1, idx2)}-${Math.max(idx1, idx2)}`;
                        if (!usedPairs.has(pairKey)) {
                            const lineSvg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                            lineSvg.style.position = 'absolute';
                            lineSvg.style.width = '100%';
                            lineSvg.style.height = '100%';
                            lineSvg.classList.add('connection-line');
                            const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                            line.setAttribute('stroke', 'white');
                            line.setAttribute('stroke-width', '1');
                            lineSvg.appendChild(line);
                            innerContainer.appendChild(lineSvg);
                            connections.push({ orbiter1: idx1, orbiter2: idx2, element: lineSvg });
                            usedPairs.add(pairKey);
                            newConnections++;
                        }
                    }
                }
            }

            // Update connection lines
            connections.forEach(c => {
                const orb1 = orbitingRaccoons[c.orbiter1];
                const orb2 = orbitingRaccoons[c.orbiter2];
                if (orb1 && orb2) {
                    const x1 = centerX + orb1.radius * Math.cos(orb1.angle * Math.PI / 180);
                    const y1 = centerY + orb1.radius * Math.sin(orb1.angle * Math.PI / 180);
                    const x2 = centerX + orb2.radius * Math.cos(orb2.angle * Math.PI / 180);
                    const y2 = centerY + orb2.radius * Math.sin(orb2.angle * Math.PI / 180);
                    c.element.setAttribute('x1', x1);
                    c.element.setAttribute('y1', y1);
                    c.element.setAttribute('x2', x2);
                    c.element.setAttribute('y2', y2);
                }
            });

            requestAnimationFrame(animateOrbiters);
        }
        animateOrbiters();

        // Update score and related displays
        function updateScore() {
            scoreElement.textContent = `${formatNumber(score, true)} üí∞`;
            clickCounterElement.textContent = `Clicks: ${totalClicks}`;
            rebirthCounter.textContent = `Rebirths: ${rebirthCount}/20`;
            rebirthProgressBar.style.width = `${(rebirthCount / 20) * 100}%`;
            updateShopButtons();
            updateRebirthBar();
        }

        // Update rebirth progress bar
        function updateRebirthBar() {
            if (rebirthCount >= 20) {
                rebirthBar.style.width = '0%';
                rebirthLabel.textContent = 'Maximum Rebirths Reached';
                innerContainer.classList.add('endgame');
                endgameMessage.style.display = 'block';
                endgameMessage.classList.add('white');
                scoreElement.style.display = 'none';
                clickCounterElement.style.display = 'none';
                playtimeElement.style.display = 'none';
                shopContainer.style.display = 'none';
                shopItems.style.display = 'none';
                toggleShop.textContent = 'Open Shop';
                rebirthLabel.style.display = 'none';
                rebirthBarContainer.style.display = 'none';
                rebirthCounter.style.display = 'none';
                rebirthProgressContainer.style.display = 'none';
                if (autoClickIntervalId) clearInterval(autoClickIntervalId);
                if (hotClickIntervalId) clearInterval(hotClickIntervalId);
                if (cyberClickIntervalId) clearInterval(cyberClickIntervalId);
                if (mitosisIntervalId) clearInterval(mitosisIntervalId);
                autoClickIntervalId = null;
                hotClickIntervalId = null;
                cyberClickIntervalId = null;
                mitosisIntervalId = null;
                if (pizzaTimeout) clearTimeout(pizzaTimeout);
                if (coffeeTimeout) clearTimeout(coffeeTimeout);
                if (uraniumTimeout) clearTimeout(uraniumTimeout);
                pizzaTimeout = null;
                coffeeTimeout = null;
                uraniumTimeout = null;
                pizzaTimer.style.display = 'none';
                coffeeTimer.style.display = 'none';
                uraniumTimer.style.display = 'none';
                orbitingRaccoons.forEach(o => o.element.remove());
                orbitingRaccoons = [];
                connections.forEach(c => c.element.remove());
                connections = [];
                return;
            }
            const progress = Math.min((rebirthClicks / rebirthThreshold) * 100, 100);
            rebirthBar.style.width = `${progress}%`;
            rebirthLabel.textContent = `Rebirth Progress: ${rebirthClicks}/${rebirthThreshold}`;
            if (rebirthClicks >= rebirthThreshold) {
                triggerRebirth();
            }
        }

        // Trigger rebirth sequence
        function triggerRebirth() {
            raccoon.style.pointerEvents = 'none';
            if (autoClickIntervalId) clearInterval(autoClickIntervalId);
            if (hotClickIntervalId) clearInterval(hotClickIntervalId);
            if (cyberClickIntervalId) clearInterval(cyberClickIntervalId);
            if (mitosisIntervalId) clearInterval(mitosisIntervalId);
            autoClickIntervalId = null;
            hotClickIntervalId = null;
            cyberClickIntervalId = null;
            mitosisIntervalId = null;
            if (pizzaTimeout) clearTimeout(pizzaTimeout);
            if (coffeeTimeout) clearTimeout(coffeeTimeout);
            if (uraniumTimeout) clearTimeout(uraniumTimeout);
            pizzaTimeout = null;
            coffeeTimeout = null;
            uraniumTimeout = null;
            pizzaTimer.style.display = 'none';
            coffeeTimer.style.display = 'none';
            uraniumTimer.style.display = 'none';
            orbitingRaccoons.forEach(o => o.element.remove());
            orbitingRaccoons = [];
            connections.forEach(c => c.element.remove());
            connections = [];
            buyAutoclicker.disabled = true;
            buyGlasses.disabled = true;
            buyTrashcan.disabled = true;
            buyHotClick.disabled = true;
            buyCyberClick.disabled = true;
            buyPizza.disabled = true;
            buyCoffee.disabled = true;
            buyUranium.disabled = true;
            buyMitosis.disabled = true;
            buyNeuralNetwork.disabled = true;
            toggleShop.disabled = true;
            toggleInfo.disabled = true;
            toggleParticles.disabled = true;
            innerContainer.classList.add('rebirth');
            setTimeout(() => {
                innerContainer.classList.remove('rebirth');
                score = 0;
                clickValue = overrideClickValue ? 5 : 1;
                autoclickers = 0;
                autoclickerCost = 5;
                glasses = 0;
                glassesCost = 10;
                trashcans = 0;
                trashcanCost = 50;
                hotClicks = 0;
                hotClickCost = 200 * Math.pow(2, rebirthCount + 1);
                cyberClicks = 0;
                cyberClickCost = 700 * Math.pow(2, rebirthCount + 1);
                pizzaCost = 300 * Math.pow(2, rebirthCount + 1);
                coffeeCost = 1500 * Math.pow(2, rebirthCount + 1);
                uraniumCost = 10000 * Math.pow(2, rebirthCount + 1);
                neuralNetworks = 0;
                neuralNetworkCost = 100000000 * Math.pow(2, rebirthCount + 1);
                mitosisBought = false;
                mitoticAutoClickers = 0;
                mitosisCost = 90000 * Math.pow(5, rebirthCount + 1);
                autoclickInterval = 1500;
                hotClickInterval = 1500 / 4;
                cyberClickInterval = 1500;
                rebirthClicks = 0;
                rebirthMultiplier = Math.max(0.1, 1 - (rebirthCount + 1) * 0.05);
                rebirthThreshold *= 2;
                rebirthCount++;
                isHotClickUnlocked = rebirthCount >= 2;
                isPizzaUnlocked = rebirthCount >= 3;
                isCyberClickUnlocked = rebirthCount >= 5;
                isCoffeeUnlocked = rebirthCount >= 8;
                isUraniumUnlocked = rebirthCount >= 8;
                isNeuralNetworkUnlocked = rebirthCount >= 15;
                isMitosisUnlocked = rebirthCount >= 18;
                buyHotClick.style.display = isHotClickUnlocked ? 'block' : 'none';
                buyCyberClick.style.display = isCyberClickUnlocked ? 'block' : 'none';
                buyPizza.style.display = isPizzaUnlocked ? 'block' : 'none';
                buyCoffee.style.display = isCoffeeUnlocked ? 'block' : 'none';
                buyUranium.style.display = isUraniumUnlocked ? 'block' : 'none';
                buyMitosis.style.display = isMitosisUnlocked && !mitosisBought ? 'block' : 'none';
                buyNeuralNetwork.style.display = isNeuralNetworkUnlocked ? 'block' : 'none';
                if (rebirthCount >= 1) {
                    rebirthCounter.style.display = 'block';
                    rebirthProgressContainer.style.display = 'block';
                }
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
                setupMitosis();
                updateScore();
                updateRaccoonAppearance();
                raccoon.style.pointerEvents = 'auto';
                toggleShop.disabled = false;
                toggleInfo.disabled = false;
                toggleParticles.disabled = false;
            }, 1000);
        }

        // Update raccoon appearance based on active effects
        function updateRaccoonAppearance() {
            const classes = ['green', 'red'];
            classes.forEach(cls => raccoon.classList.remove(cls));
            if (uraniumTimeout) raccoon.classList.add('green');
            if (hotClicks > 0) raccoon.classList.add('red');
        }

        // Calculate Neural Network multiplier
        function getNeuralNetworkMultiplier() {
            return Math.pow(10, neuralNetworks);
        }

        // Setup Auto Clicker interval
        function setupAutoClick() {
            if (autoClickIntervalId) clearInterval(autoClickIntervalId);
            if (autoclickers > 0 || mitoticAutoClickers > 0) {
                autoClickIntervalId = setInterval(() => {
                    let totalAutoClicks = 0;
                    orbitingRaccoons.forEach(o => {
                        if (o.type === 'auto' || o.type === 'mitosis') {
                            totalAutoClicks += (o.type === 'auto' ? 1 : 1);
                        }
                    });
                    const multiplier = getNeuralNetworkMultiplier();
                    score += totalAutoClicks * (overrideClickValue ? 5 : clickValue) * (overrideClickValue ? 1 : rebirthMultiplier) * multiplier;
                    totalClicks += totalAutoClicks;
                    if (rebirthCount < 20) rebirthClicks += totalAutoClicks;
                    const particleCount = Math.floor(totalAutoClicks * particleLevels[particleLevelIndex].multiplier * particleMultiplier);
                    for (let i = 0; i < particleCount; i++) {
                        raccoon.classList.add('clicked');
                        setTimeout(() => raccoon.classList.remove('clicked'), 200);
                        createParticle('ü¶ù');
                    }
                    updateScore();
                }, autoclickInterval);
            }
        }

        // Setup Hot Click interval
        function setupHotClick() {
            if (hotClickIntervalId) clearInterval(hotClickIntervalId);
            if (hotClicks > 0) {
                hotClickIntervalId = setInterval(() => {
                    let totalHotClicks = 0;
                    orbitingRaccoons.forEach(o => {
                        if (o.type === 'hot') {
                            totalHotClicks += 1;
                        }
                    });
                    const multiplier = getNeuralNetworkMultiplier();
                    score += totalHotClicks * (overrideClickValue ? 5 : clickValue) * (overrideClickValue ? 1 : rebirthMultiplier) * multiplier;
                    totalClicks += totalHotClicks;
                    if (rebirthCount < 20) rebirthClicks += totalHotClicks;
                    const particleCount = Math.floor(totalHotClicks * particleLevels[particleLevelIndex].multiplier * particleMultiplier);
                    for (let i = 0; i < particleCount; i++) {
                        raccoon.classList.add('clicked');
                        setTimeout(() => raccoon.classList.remove('clicked'), 200);
                        createParticle('üî•');
                    }
                    updateScore();
                }, hotClickInterval);
            }
        }

        // Setup Cyber Click interval
        function setupCyberClick() {
            if (cyberClickIntervalId) clearInterval(cyberClickIntervalId);
            if (cyberClicks > 0) {
                cyberClickIntervalId = setInterval(() => {
                    let totalCyberClicks = 0;
                    orbitingRaccoons.forEach(o => {
                        if (o.type === 'cyber') {
                            totalCyberClicks += 5;
                        }
                    });
                    const multiplier = getNeuralNetworkMultiplier();
                    score += totalCyberClicks * (overrideClickValue ? 5 : clickValue) * (overrideClickValue ? 1 : rebirthMultiplier) * multiplier;
                    totalClicks += totalCyberClicks;
                    if (rebirthCount < 20) rebirthClicks += totalCyberClicks;
                    const particleCount = Math.floor(totalCyberClicks * particleLevels[particleLevelIndex].multiplier * particleMultiplier);
                    for (let i = 0; i < particleCount; i++) {
                        raccoon.classList.add('clicked');
                        setTimeout(() => raccoon.classList.remove('clicked'), 200);
                        createParticle('ü¶ù');
                    }
                    updateScore();
                }, cyberClickInterval);
            }
        }

        // Setup Mitosis doubling interval
        function setupMitosis() {
            if (mitosisIntervalId) clearInterval(mitosisIntervalId);
            if (mitoticAutoClickers > 0) {
                mitosisIntervalId = setInterval(() => {
                    const currentCount = mitoticAutoClickers;
                    mitoticAutoClickers *= 2;
                    const newOrbiters = mitoticAutoClickers - orbitingRaccoons.filter(o => o.type === 'mitosis').length;
                    if (newOrbiters > 0) {
                        for (let i = 0; i < newOrbiters; i++) {
                            const orbiter = document.createElement('div');
                            orbiter.innerHTML = 'ü¶ù';
                            orbiter.style.position = 'absolute';
                            orbiter.style.width = '13px';
                            orbiter.style.height = '13px';
                            orbiter.style.fontSize = '13px';
                            orbiter.style.textAlign = 'center';
                            orbiter.style.lineHeight = '13px';
                            orbiter.style.zIndex = '5';
                            innerContainer.appendChild(orbiter);
                            orbitingRaccoons.push({
                                element: orbiter,
                                angle: Math.random() * 360,
                                speed: 20 + Math.random() * 20,
                                radius: 100 + Math.random() * 50,
                                type: 'mitosis'
                            });
                        }
                    }
                    setupAutoClick();
                    updateScore();
                }, 10000);
            }
        }

        // Create particle effect
        function createParticle(emoji = 'ü¶ù') {
            const particle = document.createElement('div');
            particle.classList.add('particle');
            particle.style.zIndex = 4;
            particle.innerHTML = emoji;
            innerContainer.appendChild(particle);
            const raccoonRect = raccoon.getBoundingClientRect();
            const containerRect = innerContainer.getBoundingClientRect();
            const startX = raccoonRect.left + raccoonRect.width / 2 - containerRect.left;
            const startY = raccoonRect.top + raccoonRect.height / 2 - containerRect.top;
            particle.style.left = `${startX}px`;
            particle.style.top = `${startY}px`;
            const angle = Math.random() * 2 * Math.PI;
            const speed = 100 + Math.random() * 50;
            const vx = Math.cos(angle) * speed;
            const vy = Math.sin(angle) * speed;
            let hue = Math.random() * 360;
            particle.style.color = `hsl(${hue}, 100%, 50%)`;
            const colorInterval = setInterval(() => {
                hue = (hue + 10) % 360;
                if (particle.parentNode) {
                    particle.style.color = `hsl(${hue}, 100%, 50%)`;
                } else {
                    clearInterval(colorInterval);
                }
            }, 50);
            const startTime = performance.now();
            function animateParticle(time) {
                const elapsed = (time - startTime) / 1000;
                if (elapsed >= 1.5) {
                    if (particle.parentNode) particle.remove();
                    clearInterval(colorInterval);
                    return;
                }
                const newX = startX + vx * elapsed;
                const newY = startY + vy * elapsed;
                particle.style.left = `${newX}px`;
                particle.style.top = `${newY}px`;
                particle.style.opacity = 1 - (elapsed / 1.5);
                requestAnimationFrame(animateParticle);
            }
            requestAnimationFrame(animateParticle);
        }

        // Handle raccoon click
        raccoon.addEventListener('click', () => {
            if (rebirthCount >= 20) {
                raccoon.classList.add('shake');
                innerContainer.classList.add('rebirth');
                setTimeout(() => {
                    raccoon.classList.remove('shake');
                    setTimeout(() => {
                        innerContainer.classList.remove('rebirth');
                        jumpToRebirth(0);
                    }, 500);
                }, 500);
                return;
            }
            const multiplier = getNeuralNetworkMultiplier();
            score += (overrideClickValue ? 5 : clickValue) * (overrideClickValue ? 1 : rebirthMultiplier) * multiplier;
            totalClicks++;
            if (rebirthCount < 20) rebirthClicks++;
            raccoon.classList.add('clicked');
            setTimeout(() => raccoon.classList.remove('clicked'), 200);
            const particleCount = Math.floor(1 * particleLevels[particleLevelIndex].multiplier * particleMultiplier);
            for (let i = 0; i < particleCount; i++) createParticle('ü¶ù');
            updateScore();
        });

        // Update shop button states and text
        function updateShopButtons() {
            buyAutoclicker.disabled = score < autoclickerCost || mitosisBought;
            buyGlasses.disabled = score < glassesCost;
            buyTrashcan.disabled = score < trashcanCost || overrideClickValue || trashcans >= 20 || rebirthCount >= 11;
            buyHotClick.disabled = score < hotClickCost || !isHotClickUnlocked || mitosisBought;
            buyCyberClick.disabled = score < cyberClickCost || !isCyberClickUnlocked;
            buyPizza.disabled = score < pizzaCost || !isPizzaUnlocked || pizzaTimeout;
            buyCoffee.disabled = score < coffeeCost || !isCoffeeUnlocked || coffeeTimeout;
            buyUranium.disabled = score < uraniumCost || !isUraniumUnlocked;
            buyMitosis.disabled = score < mitosisCost || !isMitosisUnlocked || mitosisBought;
            buyNeuralNetwork.disabled = score < neuralNetworkCost || !isNeuralNetworkUnlocked;
            buyAutoclicker.textContent = `ü§ñ Auto Clicker: ${formatNumber(autoclickerCost, true)} Racoins (${autoclickers})`;
            buyGlasses.textContent = `üï∂Ô∏è Glasses: ${formatNumber(glassesCost)} Racoins (${glasses})`;
            buyTrashcan.textContent = `üóëÔ∏è Trashcan: ${formatNumber(trashcanCost)} Racoins (${trashcans}/20)`;
            buyHotClick.textContent = `üî• Hot Click: ${formatNumber(hotClickCost)} Racoins (${hotClicks})`;
            buyCyberClick.textContent = `üíæ Cyber Click: ${formatNumber(cyberClickCost)} Racoins (${cyberClicks})`;
            buyPizza.textContent = `üçï Pizza: ${formatNumber(pizzaCost)} Racoins`;
            buyCoffee.textContent = `‚òï Coffee: ${formatNumber(coffeeCost)} Racoins`;
            buyUranium.textContent = `‚ò¢Ô∏è Uranium 235: ${formatNumber(uraniumCost)} Racoins`;
            buyMitosis.textContent = `üß¨ Mitosis: ${formatNumber(mitosisCost)} Racoins`;
            buyNeuralNetwork.textContent = `üß† Neural Network: ${formatNumber(neuralNetworkCost)} Racoins (${neuralNetworks})`;
        }

        // Purchase Auto Clicker
        buyAutoclicker.addEventListener('click', () => {
            if (score >= autoclickerCost && !mitosisBought) {
                score -= autoclickerCost;
                autoclickers++;
                autoclickerCost *= 1.5;
                const orbiter = document.createElement('div');
                orbiter.innerHTML = 'ü¶ù';
                orbiter.style.position = 'absolute';
                orbiter.style.width = '13px';
                orbiter.style.height = '13px';
                orbiter.style.fontSize = '13px';
                orbiter.style.textAlign = 'center';
                orbiter.style.lineHeight = '13px';
                orbiter.style.zIndex = '5';
                innerContainer.appendChild(orbiter);
                orbitingRaccoons.push({
                    element: orbiter,
                    angle: Math.random() * 360,
                    speed: 20 + Math.random() * 20,
                    radius: 100 + Math.random() * 50,
                    type: 'auto'
                });
                setupAutoClick();
                updateScore();
            }
        });

        // Purchase Glasses
        buyGlasses.addEventListener('click', () => {
            if (score >= glassesCost) {
                score -= glassesCost;
                glasses++;
                glassesCost *= 2;
                autoclickInterval /= 2;
                hotClickInterval /= 2;
                cyberClickInterval /= 2;
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
                updateScore();
            }
        });

        // Purchase Trashcan
        buyTrashcan.addEventListener('click', () => {
            if (score >= trashcanCost && !overrideClickValue && trashcans < 20 && rebirthCount < 11) {
                score -= trashcanCost;
                trashcans++;
                trashcanCost *= 2;
                if (!overrideClickValue) clickValue *= 2;
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
                updateScore();
            }
        });

        // Purchase Hot Click
        buyHotClick.addEventListener('click', () => {
            if (score >= hotClickCost && isHotClickUnlocked && !mitosisBought) {
                score -= hotClickCost;
                hotClicks++;
                hotClickCost *= 2;
                const orbiter = document.createElement('div');
                orbiter.innerHTML = 'ü¶ù';
                orbiter.classList.add('orbiter-hot');
                orbiter.style.position = 'absolute';
                orbiter.style.width = '13px';
                orbiter.style.height = '13px';
                orbiter.style.fontSize = '13px';
                orbiter.style.textAlign = 'center';
                orbiter.style.lineHeight = '13px';
                orbiter.style.zIndex = '5';
                innerContainer.appendChild(orbiter);
                orbitingRaccoons.push({
                    element: orbiter,
                    angle: Math.random() * 360,
                    speed: 20 + Math.random() * 20,
                    radius: 100 + Math.random() * 50,
                    type: 'hot'
                });
                setupHotClick();
                updateRaccoonAppearance();
                updateScore();
            }
        });

        // Purchase Cyber Click
        buyCyberClick.addEventListener('click', () => {
            if (score >= cyberClickCost && isCyberClickUnlocked) {
                score -= cyberClickCost;
                cyberClicks++;
                cyberClickCost *= 2;
                const orbiter = document.createElement('div');
                orbiter.innerHTML = 'ü¶ù';
                orbiter.classList.add('orbiter-cyber');
                orbiter.style.position = 'absolute';
                orbiter.style.width = '13px';
                orbiter.style.height = '13px';
                orbiter.style.fontSize = '13px';
                orbiter.style.textAlign = 'center';
                orbiter.style.lineHeight = '13px';
                orbiter.style.zIndex = '5';
                innerContainer.appendChild(orbiter);
                orbitingRaccoons.push({
                    element: orbiter,
                    angle: Math.random() * 360,
                    speed: 20 + Math.random() * 20,
                    radius: 100 + Math.random() * 50,
                    type: 'cyber'
                });
                setupCyberClick();
                updateRaccoonAppearance();
                updateScore();
            }
        });

        // Purchase Pizza
        buyPizza.addEventListener('click', () => {
            if (score >= pizzaCost && isPizzaUnlocked && !pizzaTimeout) {
                score -= pizzaCost;
                pizzaCost *= 3;
                if (pizzaTimeout) clearTimeout(pizzaTimeout);
                const originalAutoInterval = autoclickInterval;
                const originalHotInterval = hotClickInterval;
                const originalCyberInterval = cyberClickInterval;
                autoclickInterval /= 5;
                hotClickInterval /= 5;
                cyberClickInterval /= 5;
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
                pizzaTimeout = setTimeout(() => {
                    autoclickInterval = originalAutoInterval;
                    hotClickInterval = originalHotInterval;
                    cyberClickInterval = originalCyberInterval;
                    setupAutoClick();
                    setupHotClick();
                    setupCyberClick();
                    pizzaTimeout = null;
                    pizzaTimer.style.display = 'none';
                    updateShopButtons();
                }, 5000);
                pizzaTimer.style.display = 'block';
                const pizzaStart = Date.now();
                const pizzaDuration = 5000;
                function animatePizza() {
                    const elapsed = Date.now() - pizzaStart;
                    if (elapsed >= pizzaDuration) {
                        pizzaTimer.style.display = 'none';
                        return;
                    }
                    const progress = elapsed / pizzaDuration;
                    pizzaCircle.setAttribute('stroke-dashoffset', progress * 283);
                    requestAnimationFrame(animatePizza);
                }
                animatePizza();
                updateScore();
            }
        });

        // Purchase Coffee
        buyCoffee.addEventListener('click', () => {
            if (score >= coffeeCost && isCoffeeUnlocked && !coffeeTimeout) {
                score -= coffeeCost;
                coffeeCost *= 10;
                if (coffeeTimeout) clearTimeout(coffeeTimeout);
                const originalAutoInterval = autoclickInterval;
                const originalHotInterval = hotClickInterval;
                const originalCyberInterval = cyberClickInterval;
                autoclickInterval /= 10;
                hotClickInterval /= 10;
                cyberClickInterval /= 10;
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
                coffeeTimeout = setTimeout(() => {
                    autoclickInterval = originalAutoInterval;
                    hotClickInterval = originalHotInterval;
                    cyberClickInterval = originalCyberInterval;
                    setupAutoClick();
                    setupHotClick();
                    setupCyberClick();
                    coffeeTimeout = null;
                    coffeeTimer.style.display = 'none';
                    updateShopButtons();
                }, 2000);
                coffeeTimer.style.display = 'block';
                const coffeeStart = Date.now();
                const coffeeDuration = 2000;
                function animateCoffee() {
                    const elapsed = Date.now() - coffeeStart;
                    if (elapsed >= coffeeDuration) {
                        coffeeTimer.style.display = 'none';
                        return;
                    }
                    const progress = elapsed / coffeeDuration;
                    coffeeCircle.setAttribute('stroke-dashoffset', progress * 283);
                    requestAnimationFrame(animateCoffee);
                }
                animateCoffee();
                updateScore();
            }
        });

        // Purchase Uranium
        buyUranium.addEventListener('click', () => {
            if (score >= uraniumCost && isUraniumUnlocked && !uraniumTimeout) {
                score -= uraniumCost;
                uraniumCost *= 10;
                if (uraniumTimeout) clearTimeout(uraniumTimeout);
                const originalClickValue = clickValue;
                clickValue = 1000;
                uraniumTimeout = setTimeout(() => {
                    clickValue = originalClickValue;
                    uraniumTimeout = null;
                    uraniumTimer.style.display = 'none';
                    updateRaccoonAppearance();
                    updateShopButtons();
                }, 5000);
                uraniumTimer.style.display = 'block';
                const uraniumStart = Date.now();
                const uraniumDuration = 5000;
                function animateUranium() {
                    const elapsed = Date.now() - uraniumStart;
                    if (elapsed >= uraniumDuration) {
                        uraniumTimer.style.display = 'none';
                        return;
                    }
                    const progress = elapsed / uraniumDuration;
                    uraniumCircle.setAttribute('stroke-dashoffset', progress * 283);
                    requestAnimationFrame(animateUranium);
                }
                animateUranium();
                updateRaccoonAppearance();
                updateScore();
            }
        });

        // Purchase Mitosis
        buyMitosis.addEventListener('click', () => {
            if (score >= mitosisCost && isMitosisUnlocked && !mitosisBought) {
                score -= mitosisCost;
                mitosisBought = true;
                autoclickers = 0;
                hotClicks = 0;
                mitoticAutoClickers = 1;
                orbitingRaccoons.forEach(o => o.element.remove());
                orbitingRaccoons = [];
                connections.forEach(c => c.element.remove());
                connections = [];
                const orbiter = document.createElement('div');
                orbiter.innerHTML = 'ü¶ù';
                orbiter.style.position = 'absolute';
                orbiter.style.width = '13px';
                orbiter.style.height = '13px';
                orbiter.style.fontSize = '13px';
                orbiter.style.textAlign = 'center';
                orbiter.style.lineHeight = '13px';
                orbiter.style.zIndex = '5';
                innerContainer.appendChild(orbiter);
                orbitingRaccoons.push({
                    element: orbiter,
                    angle: Math.random() * 360,
                    speed: 20 + Math.random() * 20,
                    radius: 100 + Math.random() * 50,
                    type: 'mitosis'
                });
                buyMitosis.style.display = 'none';
                setupMitosis();
                updateRaccoonAppearance();
                updateScore();
            }
        });

        // Purchase Neural Network
        buyNeuralNetwork.addEventListener('click', () => {
            if (score >= neuralNetworkCost && isNeuralNetworkUnlocked) {
                score -= neuralNetworkCost;
                neuralNetworks++;
                neuralNetworkCost *= 2;
                setupAutoClick();
                setupHotClick();
                setupCyberClick();
                setupMitosis();
                updateScore();
            }
        });

        // Initialize score display
        updateScore();
    </script>
</body>

</html>
